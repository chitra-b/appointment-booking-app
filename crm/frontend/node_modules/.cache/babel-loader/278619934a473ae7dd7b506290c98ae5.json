{"ast":null,"code":"import api from \"../../apiurl\";\nimport { tokenConfig } from \"../accounts/usermanagement/auth\";\nimport { APPOINTMENTS_FETCH_ERROR, APPOINTMENTS_LOADED, APPOINTMENTS_LOADING, DATE_FORMAT } from \"../types\";\nimport moment from \"moment\";\nexport const getUserAppointments = (start_time = '', end_time = '') => (dispatch, getState) => {\n  if (!start_time && !end_time) {\n    var todayDate = new Date();\n    test_f = moment(test).format(\"YYYY-MM-DD\");\n    var end = moment().format(\"YYYY-MM-\") + moment().daysInMonth();\n    month = d.getFullYear() + '-' + (parseInt(d.getMonth()) + 1);\n  }\n\n  dispatch({\n    type: APPOINTMENTS_LOADING\n  });\n  api.get(\"/api/v1/appointments/\" + \"?start_time_after=\" + start_time + \"&end_time_before=\" + end_time, tokenConfig(getState)).then(res => {\n    dispatch({\n      type: APPOINTMENTS_LOADED,\n      payload: res.data.results\n    });\n  }).catch(err => {\n    let err_msg = \"\";\n\n    if (\"detail\" in err.response.data) {\n      err_msg = err.response.data.detail;\n    } else {\n      for (var key in err.response.data) {\n        err_msg += err.response.data[key];\n      }\n    }\n\n    dispatch({\n      type: APPOINTMENTS_FETCH_ERROR,\n      payload: err_msg\n    });\n  });\n};","map":{"version":3,"sources":["/Users/chitrabalasubramani/dev/crm/crm/frontend/src/actions/appointment/getuserappointments.js"],"names":["api","tokenConfig","APPOINTMENTS_FETCH_ERROR","APPOINTMENTS_LOADED","APPOINTMENTS_LOADING","DATE_FORMAT","moment","getUserAppointments","start_time","end_time","dispatch","getState","todayDate","Date","test_f","test","format","end","daysInMonth","month","d","getFullYear","parseInt","getMonth","type","get","then","res","payload","data","results","catch","err","err_msg","response","detail","key"],"mappings":"AAAA,OAAOA,GAAP,MAAgB,cAAhB;AACA,SAASC,WAAT,QAA4B,iCAA5B;AACA,SACEC,wBADF,EAEEC,mBAFF,EAGEC,oBAHF,EAIEC,WAJF,QAKO,UALP;AAMA,OAAOC,MAAP,MAAmB,QAAnB;AAEA,OAAO,MAAMC,mBAAmB,GAAI,CAACC,UAAU,GAAC,EAAZ,EAAgBC,QAAQ,GAAC,EAAzB,KAAgC,CAClEC,QADkE,EAElEC,QAFkE,KAG/D;AACH,MAAI,CAAEH,UAAF,IAAgB,CAAEC,QAAtB,EAA+B;AAC7B,QAAIG,SAAS,GAAG,IAAIC,IAAJ,EAAhB;AACAC,IAAAA,MAAM,GAAGR,MAAM,CAACS,IAAD,CAAN,CAAaC,MAAb,CAAoB,YAApB,CAAT;AACA,QAAIC,GAAG,GAAGX,MAAM,GAAGU,MAAT,CAAgB,UAAhB,IAA8BV,MAAM,GAAGY,WAAT,EAAxC;AACAC,IAAAA,KAAK,GAAGC,CAAC,CAACC,WAAF,KAAkB,GAAlB,IAAyBC,QAAQ,CAACF,CAAC,CAACG,QAAF,EAAD,CAAR,GAAuB,CAAhD,CAAR;AACD;;AACDb,EAAAA,QAAQ,CAAC;AAAEc,IAAAA,IAAI,EAAEpB;AAAR,GAAD,CAAR;AACCJ,EAAAA,GAAG,CACDyB,GADF,CAEG,0BACA,oBADA,GACqBjB,UADrB,GACgC,mBADhC,GACoDC,QAHvD,EAIGR,WAAW,CAACU,QAAD,CAJd,EAMEe,IANF,CAMOC,GAAG,IAAI;AACXjB,IAAAA,QAAQ,CAAC;AACPc,MAAAA,IAAI,EAAErB,mBADC;AAEPyB,MAAAA,OAAO,EAAED,GAAG,CAACE,IAAJ,CAASC;AAFX,KAAD,CAAR;AAID,GAXF,EAYEC,KAZF,CAYQC,GAAG,IAAI;AACZ,QAAIC,OAAO,GAAG,EAAd;;AACA,QAAI,YAAYD,GAAG,CAACE,QAAJ,CAAaL,IAA7B,EAAmC;AACjCI,MAAAA,OAAO,GAAGD,GAAG,CAACE,QAAJ,CAAaL,IAAb,CAAkBM,MAA5B;AACD,KAFD,MAEO;AACL,WAAK,IAAIC,GAAT,IAAgBJ,GAAG,CAACE,QAAJ,CAAaL,IAA7B,EAAmC;AACjCI,QAAAA,OAAO,IAAID,GAAG,CAACE,QAAJ,CAAaL,IAAb,CAAkBO,GAAlB,CAAX;AACD;AACF;;AACD1B,IAAAA,QAAQ,CAAC;AACPc,MAAAA,IAAI,EAAEtB,wBADC;AAEP0B,MAAAA,OAAO,EAAEK;AAFF,KAAD,CAAR;AAID,GAzBF;AA0BF,CArCM","sourcesContent":["import api from \"../../apiurl\";\nimport { tokenConfig } from \"../accounts/usermanagement/auth\";\nimport {\n  APPOINTMENTS_FETCH_ERROR,\n  APPOINTMENTS_LOADED,\n  APPOINTMENTS_LOADING,\n  DATE_FORMAT\n} from \"../types\";\nimport moment from \"moment\";\n\nexport const getUserAppointments =  (start_time='', end_time='') => (\n  dispatch,\n  getState\n) => {\n  if (! start_time && ! end_time){\n    var todayDate = new Date();\n    test_f = moment(test).format(\"YYYY-MM-DD\");\n    var end = moment().format(\"YYYY-MM-\") + moment().daysInMonth();\n    month = d.getFullYear() + '-' + (parseInt(d.getMonth())+1);\n  }\n  dispatch({ type: APPOINTMENTS_LOADING });\n   api\n    .get(\n      \"/api/v1/appointments/\"+\n      \"?start_time_after=\"+start_time+\"&end_time_before=\"+end_time,\n      tokenConfig(getState)\n    )\n    .then(res => {\n      dispatch({\n        type: APPOINTMENTS_LOADED,\n        payload: res.data.results\n      });\n    })\n    .catch(err => {\n      let err_msg = \"\";\n      if (\"detail\" in err.response.data) {\n        err_msg = err.response.data.detail;\n      } else {\n        for (var key in err.response.data) {\n          err_msg += err.response.data[key];\n        }\n      }\n      dispatch({\n        type: APPOINTMENTS_FETCH_ERROR,\n        payload: err_msg\n      });\n    });\n};"]},"metadata":{},"sourceType":"module"}