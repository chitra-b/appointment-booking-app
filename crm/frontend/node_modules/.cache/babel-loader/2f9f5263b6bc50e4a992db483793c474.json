{"ast":null,"code":"var _jsxFileName = \"/Users/chitrabalasubramani/dev/crm/crm/frontend/src/components/appointment/editappointment.js\";\nimport React, { Fragment } from \"react\";\nimport { connect } from \"react-redux\";\nimport { getAppointmentDetails } from \"../../actions/appointment/getappointmentdetails\";\nimport { updateappointment } from \"../../actions/appointment/updateappointment\";\nimport { reset } from \"../../actions/common\";\nimport { SearchSelectUsers } from \"../common/search-select-users\";\nimport { RESET_UPDATE_APPOINTMENT_STATE } from \"../../actions/types\";\nimport { Select, Button, Alert, Empty } from \"antd\";\nconst Option = Select.Option;\n\nclass EditAppointment extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.componentDidUpdate = () => {\n      if (this.props.updateAppointment.isupdated) {\n        this.props.closeModal('editApptModalVisible');\n      }\n    };\n\n    this.handleSubmit = e => {\n      e.preventDefault();\n\n      if (this.state.assignedUser && this.state.leadStatus) {\n        let data = {\n          \"user\": this.state.assignedUser,\n          \"lead_status\": this.state.leadStatus\n        };\n        this.props.updateappointment(this.props.appointmentDetails.appointment.id, data);\n      }\n    };\n\n    this.getSelectedUser = user => {\n      this.setState({\n        assignedUser: user\n      });\n    };\n\n    this.handleChange = value => {\n      this.setState({\n        leadStatus: value\n      });\n    };\n\n    this.props.reset(RESET_UPDATE_APPOINTMENT_STATE);\n    this.state = {\n      leadStatus: this.props.appointmentDetails.appointment.lead_status,\n      assignedUser: this.props.appointmentDetails.appointment.user\n    };\n  }\n\n  render() {\n    if (!this.props.appointmentDetails.appointment) {\n      return React.createElement(Empty, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 45\n        },\n        __self: this\n      });\n    }\n\n    return React.createElement(\"div\", {\n      className: \"content-section\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 48\n      },\n      __self: this\n    }, this.props.updateAppointment.isError ? React.createElement(Alert, {\n      message: \"Error\",\n      description: this.props.updateAppointment.isError,\n      type: \"error\",\n      closable: true,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 49\n      },\n      __self: this\n    }) : null, React.createElement(\"form\", {\n      onSubmit: this.handleSubmit,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 55\n      },\n      __self: this\n    }, React.createElement(\"label\", {\n      className: \"apptedit-form-item\",\n      htmlFor: \"cancellation_reason\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 56\n      },\n      __self: this\n    }, React.createElement(\"b\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 57\n      },\n      __self: this\n    }, \"Select User\")), React.createElement(\"div\", {\n      className: \"apptedit-form-item\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 58\n      },\n      __self: this\n    }, React.createElement(SearchSelectUsers, {\n      getSelectedUser: this.getSelectedUser,\n      selectedUser: this.state.assignedUser,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 59\n      },\n      __self: this\n    })), React.createElement(\"label\", {\n      className: \"apptedit-form-item\",\n      htmlFor: \"cancellation_reason\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 61\n      },\n      __self: this\n    }, React.createElement(\"b\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 62\n      },\n      __self: this\n    }, \"Select Lead Status\")), React.createElement(Select, {\n      value: this.state.leadStatus,\n      onChange: this.handleChange,\n      className: \"apptedit-form-item\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 63\n      },\n      __self: this\n    }, React.createElement(Option, {\n      value: \"Pending\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 64\n      },\n      __self: this\n    }, \"Pending\"), React.createElement(Option, {\n      value: \"Closed\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 65\n      },\n      __self: this\n    }, \"Closed\"), React.createElement(Option, {\n      value: \"Not Interested\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 66\n      },\n      __self: this\n    }, \"Not Interested\")), this.props.updateAppointment.isLoading ? React.createElement(Button, {\n      type: \"primary\",\n      loading: true,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 68\n      },\n      __self: this\n    }, \"Loading\") : React.createElement(Button, {\n      type: \"primary\",\n      className: \"cancel-form-item\",\n      htmlType: \"submit\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 69\n      },\n      __self: this\n    }, \"Submit\")));\n  }\n\n}\n\nconst mapStateToProps = state => ({\n  appointmentDetails: state.appointmentDetails,\n  updateAppointment: state.updateAppointment,\n  auth: state.auth\n});\n\nexport default connect(mapStateToProps, {\n  getAppointmentDetails,\n  updateappointment,\n  reset\n})(EditAppointment);","map":{"version":3,"sources":["/Users/chitrabalasubramani/dev/crm/crm/frontend/src/components/appointment/editappointment.js"],"names":["React","Fragment","connect","getAppointmentDetails","updateappointment","reset","SearchSelectUsers","RESET_UPDATE_APPOINTMENT_STATE","Select","Button","Alert","Empty","Option","EditAppointment","Component","constructor","props","componentDidUpdate","updateAppointment","isupdated","closeModal","handleSubmit","e","preventDefault","state","assignedUser","leadStatus","data","appointmentDetails","appointment","id","getSelectedUser","user","setState","handleChange","value","lead_status","render","isError","isLoading","mapStateToProps","auth"],"mappings":"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","sourcesContent":["import React, { Fragment } from \"react\";\nimport { connect } from \"react-redux\";\nimport { getAppointmentDetails } from \"../../actions/appointment/getappointmentdetails\";\nimport { updateappointment } from \"../../actions/appointment/updateappointment\";\nimport { reset } from \"../../actions/common\";\nimport { SearchSelectUsers } from \"../common/search-select-users\";\nimport {\n    RESET_UPDATE_APPOINTMENT_STATE\n} from \"../../actions/types\";\nimport {\n    Select,\n    Button,\n    Alert,\n    Empty\n} from \"antd\";\nconst { Option } = Select;\n\nclass EditAppointment extends React.Component {\n    constructor(props) {\n        super(props);\n        this.props.reset(RESET_UPDATE_APPOINTMENT_STATE);\n        this.state = { leadStatus: this.props.appointmentDetails.appointment.lead_status, assignedUser: this.props.appointmentDetails.appointment.user }\n    }\n    componentDidUpdate = () =>{\n        if(this.props.updateAppointment.isupdated){\n            this.props.closeModal('editApptModalVisible');\n        }\n    }\n    handleSubmit = e => {\n        e.preventDefault();\n        if (this.state.assignedUser && this.state.leadStatus) {\n            let data = { \"user\": this.state.assignedUser, \"lead_status\": this.state.leadStatus }\n            this.props.updateappointment(this.props.appointmentDetails.appointment.id, data);\n        }\n        \n    };\n    getSelectedUser = (user) => {\n        this.setState({ assignedUser: user });\n    }\n    handleChange = value => {\n        this.setState({ leadStatus: value });\n    };\n    render() {\n        if (!this.props.appointmentDetails.appointment) {\n            return <Empty />;\n        }\n        return (\n            <div className=\"content-section\">\n                {this.props.updateAppointment.isError ? <Alert\n                    message=\"Error\"\n                    description={this.props.updateAppointment.isError}\n                    type=\"error\"\n                    closable\n                /> : null}\n                <form onSubmit={this.handleSubmit}>\n                    <label className=\"apptedit-form-item\" htmlFor=\"cancellation_reason\">\n                        <b>Select User</b></label>\n                    <div className=\"apptedit-form-item\">\n                        <SearchSelectUsers getSelectedUser={this.getSelectedUser} selectedUser={this.state.assignedUser} />\n                    </div>\n                    <label className=\"apptedit-form-item\" htmlFor=\"cancellation_reason\">\n                        <b>Select Lead Status</b></label>\n                    <Select value={this.state.leadStatus} onChange={this.handleChange} className=\"apptedit-form-item\">\n                        <Option value=\"Pending\">Pending</Option>\n                        <Option value=\"Closed\">Closed</Option>\n                        <Option value=\"Not Interested\">Not Interested</Option>\n                    </Select>\n                    {this.props.updateAppointment.isLoading ? <Button type=\"primary\" loading>Loading</Button>\n                        : <Button type=\"primary\" className=\"cancel-form-item\" htmlType=\"submit\" >Submit</Button>}\n                </form>\n            </div>\n        );\n    }\n}\nconst mapStateToProps = state => ({\n    appointmentDetails: state.appointmentDetails,\n    updateAppointment: state.updateAppointment,\n    auth: state.auth\n});\nexport default connect(mapStateToProps, { getAppointmentDetails, updateappointment, reset })(EditAppointment)"]},"metadata":{},"sourceType":"module"}