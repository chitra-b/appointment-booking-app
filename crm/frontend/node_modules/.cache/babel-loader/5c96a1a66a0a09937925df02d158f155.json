{"ast":null,"code":"import api from '../../../apiurl';\nimport { tokenConfig } from \"./../usermanagement/auth\";\nimport { MYPROFILE_LOADED, MYPROFILE_LOADING, AUTH_ERROR } from \"../../types\"; // CHECK TOKEN & LOAD USER\n\nexport const loadUserProfile = () => (dispatch, getState) => {\n  // User Loading\n  dispatch({\n    type: MYPROFILE_LOADING\n  });\n  api.get(\"/user_profile/\", tokenConfig(getState)).then(res => {\n    dispatch({\n      type: MYPROFILE_LOADED,\n      payload: res.data[0]\n    });\n  }).catch(err => {\n    //message.error(err.response.data.details,10);\n    //dispatch(returnErrors(err.response.data, err.response.status));\n    dispatch({\n      type: AUTH_ERROR\n    });\n  });\n}; // Return current user details - helper function\n\nexport const getUserDetails = getState => {\n  // Returns dict containing username and role\n  let userDetails = {};\n  console.log(getState().myProfile.user);\n\n  if (getState().myProfile.user) {\n    userDetails = {\n      username: getState().myProfile.user.username,\n      role: getState().myProfile.user.groups.name\n    };\n  }\n};","map":{"version":3,"sources":["/Users/chitrabalasubramani/dev/crm/crm/frontend/src/actions/accounts/myprofilemanagement/getprofile.js"],"names":["api","tokenConfig","MYPROFILE_LOADED","MYPROFILE_LOADING","AUTH_ERROR","loadUserProfile","dispatch","getState","type","get","then","res","payload","data","catch","err","getUserDetails","userDetails","console","log","myProfile","user","username","role","groups","name"],"mappings":"AAAA,OAAOA,GAAP,MAAgB,iBAAhB;AACA,SAASC,WAAT,QAA4B,0BAA5B;AACA,SACIC,gBADJ,EAEIC,iBAFJ,EAGIC,UAHJ,QAIS,aAJT,C,CAKA;;AACA,OAAO,MAAMC,eAAe,GAAG,MAAM,CAACC,QAAD,EAAWC,QAAX,KAAwB;AACzD;AACAD,EAAAA,QAAQ,CAAC;AAAEE,IAAAA,IAAI,EAAEL;AAAR,GAAD,CAAR;AACAH,EAAAA,GAAG,CAACS,GAAJ,CAAQ,gBAAR,EAA0BR,WAAW,CAACM,QAAD,CAArC,EACCG,IADD,CACMC,GAAG,IAAI;AACTL,IAAAA,QAAQ,CAAC;AACLE,MAAAA,IAAI,EAAEN,gBADD;AAELU,MAAAA,OAAO,EAAED,GAAG,CAACE,IAAJ,CAAS,CAAT;AAFJ,KAAD,CAAR;AAIH,GAND,EAOCC,KAPD,CAOOC,GAAG,IAAI;AACV;AACA;AACAT,IAAAA,QAAQ,CAAC;AACLE,MAAAA,IAAI,EAAEJ;AADD,KAAD,CAAR;AAGH,GAbD;AAcH,CAjBM,C,CAoBP;;AACA,OAAO,MAAMY,cAAc,GAAGT,QAAQ,IAAI;AACtC;AACA,MAAIU,WAAW,GAAG,EAAlB;AACAC,EAAAA,OAAO,CAACC,GAAR,CAAYZ,QAAQ,GAAGa,SAAX,CAAqBC,IAAjC;;AACA,MAAId,QAAQ,GAAGa,SAAX,CAAqBC,IAAzB,EAA8B;AAC1BJ,IAAAA,WAAW,GAAG;AAACK,MAAAA,QAAQ,EAAEf,QAAQ,GAAGa,SAAX,CAAqBC,IAArB,CAA0BC,QAArC;AACVC,MAAAA,IAAI,EAAEhB,QAAQ,GAAGa,SAAX,CAAqBC,IAArB,CAA0BG,MAA1B,CAAiCC;AAD7B,KAAd;AAEH;AACF,CARI","sourcesContent":["import api from '../../../apiurl'\nimport { tokenConfig } from \"./../usermanagement/auth\";\nimport {\n    MYPROFILE_LOADED,\n    MYPROFILE_LOADING,\n    AUTH_ERROR\n  } from \"../../types\";\n// CHECK TOKEN & LOAD USER\nexport const loadUserProfile = () => (dispatch, getState) => {\n    // User Loading\n    dispatch({ type: MYPROFILE_LOADING });\n    api.get(\"/user_profile/\", tokenConfig(getState))\n    .then(res => {\n        dispatch({\n            type: MYPROFILE_LOADED,\n            payload: res.data[0]\n        });\n    })\n    .catch(err => {\n        //message.error(err.response.data.details,10);\n        //dispatch(returnErrors(err.response.data, err.response.status));\n        dispatch({\n            type: AUTH_ERROR\n        });\n    });\n};\n\n\n// Return current user details - helper function\nexport const getUserDetails = getState => {\n    // Returns dict containing username and role\n    let userDetails = {};\n    console.log(getState().myProfile.user);\n    if (getState().myProfile.user){\n        userDetails = {username: getState().myProfile.user.username,\n            role: getState().myProfile.user.groups.name};\n    }\n  };\n  \n"]},"metadata":{},"sourceType":"module"}