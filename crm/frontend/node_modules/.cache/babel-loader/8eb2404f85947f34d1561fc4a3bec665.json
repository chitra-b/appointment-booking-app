{"ast":null,"code":"import api from \"../../../apiurl\";\nimport { tokenConfig } from \"./../usermanagement/auth\";\nimport { message } from \"antd\";\nimport { MYPROFILE_UPDATED, MYPROFILE_UPDATE_ERROR, MYPROFILE_UPDATING, USER_UPDATED_LIST } from \"../../types\";\nexport const updateProfile = (userid, userdata) => (dispatch, getState) => {\n  dispatch({\n    type: MYPROFILE_UPDATING\n  });\n  const body = JSON.stringify(userdata);\n  api.patch(\"/api/v1/user_profile/\" + userid.toString() + \"/\", body, tokenConfig(getState)).then(res => {\n    message.success(\"User updated successfully\");\n    dispatch({\n      type: MYPROFILE_UPDATED,\n      payload: res.data\n    }); // update userlist in getUsers state, so it reflects in user list page for\n\n    dispatch({\n      type: USER_UPDATED_LIST,\n      payload: res.data\n    });\n  }).catch(err => {\n    let err_msg = \"\";\n\n    if (\"detail\" in err.response.data) {\n      err_msg = err.response.data.detail;\n    } else {\n      for (var key in err.response.data) {\n        err_msg += err.response.data[key];\n      }\n    }\n\n    dispatch({\n      type: MYPROFILE_UPDATE_ERROR,\n      payload: err_msg\n    });\n  });\n};","map":{"version":3,"sources":["/Users/chitrabalasubramani/dev/crm/crm/frontend/src/actions/accounts/myprofilemanagement/updateprofile.js"],"names":["api","tokenConfig","message","MYPROFILE_UPDATED","MYPROFILE_UPDATE_ERROR","MYPROFILE_UPDATING","USER_UPDATED_LIST","updateProfile","userid","userdata","dispatch","getState","type","body","JSON","stringify","patch","toString","then","res","success","payload","data","catch","err","err_msg","response","detail","key"],"mappings":"AAAA,OAAOA,GAAP,MAAgB,iBAAhB;AACA,SAASC,WAAT,QAA4B,0BAA5B;AACA,SAASC,OAAT,QAAwB,MAAxB;AACA,SACEC,iBADF,EAEEC,sBAFF,EAGEC,kBAHF,EAIEC,iBAJF,QAKO,aALP;AAOA,OAAO,MAAMC,aAAa,GAAG,CAACC,MAAD,EAASC,QAAT,KAAsB,CAACC,QAAD,EAAWC,QAAX,KAAwB;AACvED,EAAAA,QAAQ,CAAC;AAAEE,IAAAA,IAAI,EAAEP;AAAR,GAAD,CAAR;AACA,QAAMQ,IAAI,GAAGC,IAAI,CAACC,SAAL,CAAeN,QAAf,CAAb;AACAT,EAAAA,GAAG,CACAgB,KADH,CAEI,0BAA0BR,MAAM,CAACS,QAAP,EAA1B,GAA8C,GAFlD,EAGIJ,IAHJ,EAIIZ,WAAW,CAACU,QAAD,CAJf,EAMGO,IANH,CAMQC,GAAG,IAAI;AACXjB,IAAAA,OAAO,CAACkB,OAAR,CAAgB,2BAAhB;AACAV,IAAAA,QAAQ,CAAC;AACPE,MAAAA,IAAI,EAAET,iBADC;AAEPkB,MAAAA,OAAO,EAAEF,GAAG,CAACG;AAFN,KAAD,CAAR,CAFW,CAMX;;AACAZ,IAAAA,QAAQ,CAAC;AAAEE,MAAAA,IAAI,EAAEN,iBAAR;AAA2Be,MAAAA,OAAO,EAAEF,GAAG,CAACG;AAAxC,KAAD,CAAR;AACD,GAdH,EAeGC,KAfH,CAeSC,GAAG,IAAI;AACZ,QAAIC,OAAO,GAAG,EAAd;;AACA,QAAI,YAAYD,GAAG,CAACE,QAAJ,CAAaJ,IAA7B,EAAmC;AACjCG,MAAAA,OAAO,GAAGD,GAAG,CAACE,QAAJ,CAAaJ,IAAb,CAAkBK,MAA5B;AACD,KAFD,MAEO;AACL,WAAK,IAAIC,GAAT,IAAgBJ,GAAG,CAACE,QAAJ,CAAaJ,IAA7B,EAAmC;AACjCG,QAAAA,OAAO,IAAID,GAAG,CAACE,QAAJ,CAAaJ,IAAb,CAAkBM,GAAlB,CAAX;AACD;AACF;;AACDlB,IAAAA,QAAQ,CAAC;AACPE,MAAAA,IAAI,EAAER,sBADC;AAEPiB,MAAAA,OAAO,EAAEI;AAFF,KAAD,CAAR;AAID,GA5BH;AA6BD,CAhCI","sourcesContent":["import api from \"../../../apiurl\";\nimport { tokenConfig } from \"./../usermanagement/auth\";\nimport { message } from \"antd\";\nimport {\n  MYPROFILE_UPDATED,\n  MYPROFILE_UPDATE_ERROR,\n  MYPROFILE_UPDATING,\n  USER_UPDATED_LIST\n} from \"../../types\";\n\nexport const updateProfile = (userid, userdata) => (dispatch, getState) => {\n    dispatch({ type: MYPROFILE_UPDATING });\n    const body = JSON.stringify(userdata);\n    api\n      .patch(\n        \"/api/v1/user_profile/\" + userid.toString() + \"/\",\n        body,\n        tokenConfig(getState)\n      )\n      .then(res => {\n        message.success(\"User updated successfully\");\n        dispatch({\n          type: MYPROFILE_UPDATED,\n          payload: res.data\n        });\n        // update userlist in getUsers state, so it reflects in user list page for\n        dispatch({ type: USER_UPDATED_LIST, payload: res.data });\n      })\n      .catch(err => {\n        let err_msg = \"\";\n        if (\"detail\" in err.response.data) {\n          err_msg = err.response.data.detail;\n        } else {\n          for (var key in err.response.data) {\n            err_msg += err.response.data[key];\n          }\n        }\n        dispatch({\n          type: MYPROFILE_UPDATE_ERROR,\n          payload: err_msg\n        });\n      });\n  };"]},"metadata":{},"sourceType":"module"}